(this["webpackJsonpreact-app-phonebook"]=this["webpackJsonpreact-app-phonebook"]||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},28:function(e,t,a){e.exports=a(59)},33:function(e,t,a){},34:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(25),l=a.n(c),r=(a(33),a(26)),s=a.n(r),i=(a(34),function(){return o.a.createElement("div",{className:"fluid-container"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:s.a,className:"App-logo",alt:"logo"}),o.a.createElement("h1",null,"Phone Book",o.a.createElement("br",null),o.a.createElement("span",null,"React + FireStore")),o.a.createElement("p",{className:"author"},"Ow Yeong")))}),m=a(9),d=a(1),u=a(3),h=a(8),p=a(14);a(35);p.initializeApp({apiKey:"AIzaSyBeP-OKURQn9w09xAwmTO7AWdiH9YCPHso",authDomain:"react-phonebook-c1f3e.firebaseapp.com",databaseURL:"https://react-phonebook-c1f3e.firebaseio.com",projectId:"react-phonebook-c1f3e",storageBucket:"react-phonebook-c1f3e.appspot.com",messagingSenderId:"53683243345",appId:"1:53683243345:web:44248474f13055c1e1eb70"});var b=p.firestore(),f=p.firestore,E=a(12),w=a.n(E),N=function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({showOrNot:!1}),r=Object(h.a)(l,2),s=r[0],i=r[1],d=Object(n.useState)({showOrNot:!1}),p=Object(h.a)(d,2),f=p[0],E=p[1];Object(n.useEffect)((function(){var e=b.collection("contact").orderBy("lastUpdated","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(u.a)({id:e.id},e.data())}));c(t)}));return function(){e()}}),[]);var N=function(e){i({showOrNot:!0,title:"Confirm Delete Contact?",desc:"Click Yes to permenantly delete the contact. This action is could not be reverse.",targetId:e})};return o.a.createElement("div",null,o.a.createElement("div",{className:"text-center"},o.a.createElement("p",{className:"small text-danger font-weight-lighter\t"},"Note: If browsing on small mobile screen, table could be scroll horizontally. Action button (Edit, Delete) located at the last column of the table"),o.a.createElement(m.b,{to:"/list/new"},o.a.createElement("button",{type:"button",className:"w-50 m-4 btn btn-success clearfix"},"Create New Contact")),o.a.createElement("br",null),o.a.createElement("div",{className:"table-responsive"},o.a.createElement("table",{className:"table text-left"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{scope:"col"},"ID"),o.a.createElement("th",{scope:"col"},"Name"),o.a.createElement("th",{scope:"col"},"PhoneNumber"),o.a.createElement("th",{scope:"col"},"Action"))),o.a.createElement("tbody",null,a.map((function(e){return o.a.createElement("tr",{key:e.id},o.a.createElement("th",{scope:"row"},e.id),o.a.createElement("td",null,e.name),o.a.createElement("td",null,e.phone),o.a.createElement("td",null,o.a.createElement(m.b,{to:"/list/".concat(e.id)},o.a.createElement("button",{type:"button",className:"btn btn-primary mb-1"},"Edit"))," ","\xa0",o.a.createElement("button",{type:"button",onClick:N.bind(void 0,e.id),className:"btn btn-danger mb-1"},"Delete")))})))))),o.a.createElement(w.a,{show:f.showOrNot,success:!0,title:f.title||"",onConfirm:function(){return E({showOrNot:!1})}},f.desc||""),o.a.createElement(w.a,{show:s.showOrNot,warning:!0,showCancel:!0,confirmBtnText:"Yes, delete it!",confirmBtnBsStyle:"danger",title:s.title||"",onConfirm:function(e){i({showOrNot:!1}),b.collection("contact").doc(e).delete().then((function(){E({showOrNot:!0,title:"Successfully delete the contact",desc:"Successfully delete the contact. You may see the changes instantly."})})).catch((function(e){alert("Some Error Occur when deleting contact. Please Try Again Later!.")}))}.bind(void 0,s.targetId),onCancel:function(){i({showOrNot:!1})}},s.desc||""))},O=function(e){var t=e.match,a=Object(n.useState)({fields:{},errors:{}}),c=Object(h.a)(a,2),l=c[0],r=c[1],s=Object(n.useState)({showOrNot:!1}),i=Object(h.a)(s,2),d=i[0],p=i[1],E=Object(n.useState)({showOrNot:!1}),N=Object(h.a)(E,2),O=N[0],v=N[1],g=t.params.id,y="new"===g,x=function(){var e=l.fields,t={},a=!0;return e.name||(a=!1,t.name="Name Cannot be empty"),e.name&&(e.name.length>50&&(a=!1,t.name="Maximum character allow for name is 50"),e.name.match(/^[a-zA-Z ()]+$/)||(a=!1,t.name="Name can only letters and symbol( -, +, (, ) )")),e.phone||(a=!1,t.phone="Phone Cannot be empty"),e.phone&&(e.phone.length>15&&(a=!1,t.phone="Maximum character allow for phone is 15"),e.phone.match(/^[0-9\-+]+$/)||(a=!1,t.phone="Only number, + or -")),r(Object(u.a)(Object(u.a)({},l),{},{errors:t})),a},C=function(e,t){var a=l.fields;a[e]=t.target.value,r(Object(u.a)(Object(u.a)({},l),{},{fields:a})),x()};return Object(n.useEffect)((function(){!1===y&&b.collection("contact").doc(g).get().then((function(e){if(e.exists){var t=Object(u.a)({id:e.id},e.data());r(Object(u.a)(Object(u.a)({},l),{},{fields:t}))}else y||(window.location.href="/react-app-phonebook/list/new")})).catch((function(){}))}),[]),o.a.createElement("div",null,o.a.createElement("div",{className:"container text-center"},o.a.createElement("h2",{className:"my-3"},y?"New Contact":"Edit Contact"),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"id"},"Id"),o.a.createElement("input",{disabled:!0,type:"text",className:"form-control",id:"exampleFormControlInput1",placeholder:"id",value:l.fields.id||""})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"exampleFormControlInput1"},"Contact Name"),o.a.createElement("input",{className:"form-control",placeholder:"Name",type:"text",onChange:C.bind(void 0,"name"),value:l.fields.name||""}),o.a.createElement("div",{className:"invalid-feedback d-block text-left"},l.errors.name||"")),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"exampleFormControlInput1"},"Contact Phone"),o.a.createElement("input",{type:"text",className:"form-control",onChange:C.bind(void 0,"phone"),placeholder:"xxx-xxxxxxx",value:l.fields.phone||""}),o.a.createElement("div",{className:"invalid-feedback d-block text-left"},l.errors.phone||""))),o.a.createElement("button",{onClick:function(){x()?y?b.collection("contact").add(Object(u.a)(Object(u.a)({},l.fields),{},{lastUpdated:f.FieldValue.serverTimestamp()})).then((function(){p({showOrNot:!0,title:"Successfully Created the contact",desc:"Successfully Created the contact into the database. You may see the changes instantly."})})).catch((function(e){v({showOrNot:!0,title:"Error!",desc:"Some error occur please try again later."})})):b.collection("contact").doc(g).set(Object(u.a)(Object(u.a)({},l.fields),{},{lastUpdated:f.FieldValue.serverTimestamp()})).then((function(){p({showOrNot:!0,title:"Successfully Updated the contact",desc:"Successfully Updated the contact into the database. You may see the changes instantly."})})).catch((function(e){v({showOrNot:!0,title:"Error!",desc:"Some error occur please try again later."})})):v({showOrNot:!0,title:"Error!",desc:"Form contains error. Please amend it based on the instruction provided."})},className:"btn btn-success mr-2"},y?"Create New Contact":"Edit Contact"),o.a.createElement(m.b,{to:"/"},o.a.createElement("button",{className:"btn btn-secondary"},"Cancel"))),o.a.createElement(w.a,{show:d.showOrNot,success:!0,title:d.title||"",onConfirm:function(){window.location.href="/react-app-phonebook/"}},d.desc||""),o.a.createElement(w.a,{show:O.showOrNot,danger:!0,title:O.title||"",onConfirm:function(){v({showOrNot:!1})}},O.desc||""))};var v=function(){return o.a.createElement(m.a,null,o.a.createElement("div",null,o.a.createElement(i,null),o.a.createElement(d.c,null,o.a.createElement(d.a,{path:"/",exact:!0,component:N}),o.a.createElement(d.a,{path:"/list/:id",component:O}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(58);l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.5d21b40c.chunk.js.map